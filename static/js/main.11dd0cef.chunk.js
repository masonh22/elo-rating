(this["webpackJsonpelo-rating"]=this["webpackJsonpelo-rating"]||[]).push([[0],{71:function(e,t,a){e.exports=a(86)},76:function(e,t,a){},79:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(7),l=a.n(s),o=(a(76),a(54)),i=a(55),c=a(60),u=a(59),m=a(23),d=a(119),p=a(123),h=a(131),f=a(130),g=a(129),b=a(125),v=a(128),y=a(132),w=a(41),E=a.n(w),S=a(124),_=(a(79),a(42)),C=a.n(_);a(80);C.a.initializeApp({apiKey:"AIzaSyAgCVdrbzL6Qcc5byXkkABSm4oUAonDWhs",authDomain:"elo-rating-b8532.firebaseapp.com",databaseURL:"https://elo-rating-b8532.firebaseio.com",projectId:"elo-rating-b8532",storageBucket:"elo-rating-b8532.appspot.com",messagingSenderId:"1089038380501",appId:"1:1089038380501:web:66b47d2dd736f330f8615c"});var k=C.a,O=a(39),j=a.n(O),N=k.database(),M=function(e){var t=e.value;return n.a.createElement(d.a,{value:t,onChange:function(t,a){e.update(a)},showLabels:!0,className:"bottom-nav"},n.a.createElement(p.a,{label:"Leaderboard"}),n.a.createElement(p.a,{label:"Report Game"}),n.a.createElement(p.a,{label:"History"}),n.a.createElement(p.a,{label:e.login?"Log in":"Profile"}))},P=function(e){return n.a.createElement(E.a,{columns:[{name:"MMR",selector:"rating",sortable:!0},{name:"Name",selector:"name",sortable:!0},{name:"Games Played",selector:"games_played",sortable:!0}],data:e.leaderboard,customStyles:{rows:{style:{fontSize:"20px"}},headCells:{style:{fontSize:"20px"}}},defaultSortField:"rating",defaultSortAsc:!1})},A=Object(S.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),z=function(e){var t=A(),a=n.a.useState(""),r=Object(m.a)(a,2),s=r[0],l=r[1],o=n.a.useState(""),i=Object(m.a)(o,2),c=i[0],u=i[1],d=function(t){for(var a=[],r=e.players.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),s=0;s<r.length;s++)r[s].username!==t&&a.push(n.a.createElement(f.a,{value:r[s].username},r[s].name));return a};return n.a.createElement("div",{className:"selectors"},n.a.createElement(b.a,{className:t.formControl},n.a.createElement(h.a,{id:"winner-select-label"},"Winner"),n.a.createElement(g.a,{labelId:"winner-select-label",id:"winner-select",value:s,onChange:function(e){return l(e.target.value)},className:"select"},d(c))),n.a.createElement(b.a,{className:t.formControl},n.a.createElement(h.a,{id:"loser-select-label"},"Loser"),n.a.createElement(g.a,{labelId:"loser-select-label",id:"loser-select",value:c,onChange:function(e){return u(e.target.value)},className:"select"},d(s))),n.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return e.submit(s,c)}},"Submit"))},I=function(e){return n.a.createElement(E.a,{columns:[{name:"Date",selector:"date",sortable:!0},{name:"Winner",selector:"winner",sortable:!0},{name:"Loser",selector:"loser",sortable:!0},{name:"MMR Change",selector:"mmr_change",sortable:!0}],data:e.history,customStyles:{rows:{style:{fontSize:"20px"}},headCells:{style:{fontSize:"20px"}}},defaultSortField:"date",defaultSortAsc:!1})},L=function(e){var t=n.a.useState(""),a=Object(m.a)(t,2),r=a[0],s=a[1],l=n.a.useState(""),o=Object(m.a)(l,2),i=o[0],c=o[1];return n.a.createElement("div",{className:"selectors"},n.a.createElement(y.a,{id:"username-input",label:"Username",type:"search",onChange:function(e){return s(e.target.value)}}),n.a.createElement(y.a,{id:"password-input",label:"Password",type:"password",onChange:function(e){return c(e.target.value)}}),n.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return e.submit(r,i)}},"Submit"))},D=function(e){var t=n.a.useState(""),a=Object(m.a)(t,2),r=a[0],s=a[1],l=n.a.useState(""),o=Object(m.a)(l,2),i=o[0],c=o[1];return n.a.createElement("div",{className:"selectors-2"},n.a.createElement(y.a,{id:"oldpass-input",label:"Old Password",type:"password",onChange:function(e){return s(e.target.value)}}),n.a.createElement(y.a,{id:"password-input",label:"New Password",type:"password",onChange:function(e){return c(e.target.value)}}),n.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return e.update(r,i)}},"Submit"))},W=function(e){var t=e.history.filter((function(t){return t.winner===e.user.name||t.loser===e.user.name})),a="Current MMR: ".concat(e.user.rating,". Games Played: ").concat(e.user.games_played);return n.a.createElement("div",null,n.a.createElement("h2",null,e.user.name),n.a.createElement("p",null,a),n.a.createElement(I,{history:t}),n.a.createElement(D,{update:e.updatepass}))},x=function(e){return[n.a.createElement(P,{leaderboard:e.leaderboard}),n.a.createElement(z,{players:e.leaderboard,submit:e.submit}),n.a.createElement(I,{history:e.history.slice(0,15)}),e.login?n.a.createElement(L,{submit:e.loginfunc}):n.a.createElement(W,{history:e.history,user:e.user,updatepass:e.updatepass})][e.view]},B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={current_view:0,players:{},leaderboard:[],history:[],user:null},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.ref("users").orderByChild("rating").on("value",(function(t){e.setState((function(){var e=t.toJSON(),a=Object.keys(e).map((function(t){var a=e[t];return a.username=t,a}));return{players:t.val(),leaderboard:a}}))})),N.ref("history").on("value",(function(t){e.setState((function(){var e=t.toJSON();return{history:Object.keys(e).map((function(t){return e[t]})).reverse()}}))}))}},{key:"change_current_view",value:function(e){this.setState({current_view:e})}},{key:"login",value:function(e,t){var a=this;this.state.players[e]?N.ref("passwords").once("value").then((function(r){j()(t)===r.val()[e]?a.setState((function(t){return{user:Object.assign({username:e},t.players[e])}})):alert("Password is incorrect")})):alert("Username is incorrect")}},{key:"update_password",value:function(e,t){var a=this;N.ref("passwords").once("value").then((function(r){j()(e)!==r.val()[a.state.user.username]&&alert("Password is incorrect");var n={};n[a.state.user.username]=j()(t),N.ref("passwords").update(n),alert("Password changed")}))}},{key:"add_game",value:function(e,t){if(null!==this.state.user){if(this.state.players[e]&&this.state.players[t]){var a=this.state.players[e].rating,r=this.state.players[t].rating,n=this.state.players[e].games_played,s=this.state.players[t].games_played,l=this.state.players[e].name,o=this.state.players[t].name,i=function(e,t){return 1/(1+Math.pow(10,(e-t)/400))}(a,r),c=Math.round(50*i),u=new Date,m=N.ref("history").push().key,d={winner:l,loser:o,posted_by:this.state.user,mmr_change:c,date:(u.getMonth()+1).toString()+"/"+u.getDate().toString()},p={};p["/history/"+m]=d,p["users/"+e+"/rating"]=a+c,p["users/"+t+"/rating"]=r-c,p["users/"+e+"/games_played"]=n+1,p["users/"+t+"/games_played"]=s+1,N.ref().update(p)}this.change_current_view(0)}else alert("You need to be logged in")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"content-container"},n.a.createElement(x,{leaderboard:this.state.leaderboard,history:this.state.history,view:this.state.current_view,submit:function(t,a){return e.add_game(t,a)},login:null===this.state.user,loginfunc:function(t,a){return e.login(t,a)},user:this.state.user,updatepass:function(t,a){return e.update_password(t,a)}})),n.a.createElement("div",{className:"footer"},n.a.createElement(M,{value:this.state.current_view,update:function(t){return e.change_current_view(t)},login:null===this.state.user})))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.11dd0cef.chunk.js.map