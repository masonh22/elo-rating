(this["webpackJsonpelo-rating"]=this["webpackJsonpelo-rating"]||[]).push([[0],{64:function(e,t,a){e.exports=a(80)},69:function(e,t,a){},70:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),l=a.n(s),i=(a(69),a(39)),o=a(40),c=a(43),u=a(42),m=a(32),d=a(113),h=a(117),p=a(125),v=a(124),f=a(123),b=a(119),g=a(122),y=a(126),E=a(118),w=(a(70),a(41)),k=a.n(w);a(72);k.a.initializeApp({apiKey:"AIzaSyAgCVdrbzL6Qcc5byXkkABSm4oUAonDWhs",authDomain:"elo-rating-b8532.firebaseapp.com",databaseURL:"https://elo-rating-b8532.firebaseio.com",projectId:"elo-rating-b8532",storageBucket:"elo-rating-b8532.appspot.com",messagingSenderId:"1089038380501",appId:"1:1089038380501:web:66b47d2dd736f330f8615c"});var _=k.a,S=a(52),O=a.n(S),j=_.database(),C=function(e){var t=e.value;return r.a.createElement(d.a,{value:t,onChange:function(t,a){e.update(a)},showLabels:!0,className:"bottom-nav"},r.a.createElement(h.a,{label:"Leaderboard"}),r.a.createElement(h.a,{label:"Report Game"}),r.a.createElement(h.a,{label:"History"}),r.a.createElement(h.a,{label:"Log in"}))},N=function(e){var t=e.leaderboard.map((function(e,t){return r.a.createElement("li",{key:e.username},e.name,", MMR: ",e.rating,", Games played: ",e.games_played)}));return r.a.createElement("ol",null,t)},M=Object(E.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),I=function(e){var t=M(),a=r.a.useState(""),n=Object(m.a)(a,2),s=n[0],l=n[1],i=r.a.useState(""),o=Object(m.a)(i,2),c=o[0],u=o[1],d=function(t){for(var a=[],n=0;n<e.players.length;n++)e.players[n].username!==t&&a.push(r.a.createElement(v.a,{value:e.players[n].username},e.players[n].name));return a};return r.a.createElement("div",{className:"selectors"},r.a.createElement(b.a,{className:t.formControl},r.a.createElement(p.a,{id:"winner-select-label"},"Winner"),r.a.createElement(f.a,{labelId:"winner-select-label",id:"winner-select",value:s,onChange:function(e){return l(e.target.value)},className:"select"},d(c))),r.a.createElement(b.a,{className:t.formControl},r.a.createElement(p.a,{id:"loser-select-label"},"Loser"),r.a.createElement(f.a,{labelId:"loser-select-label",id:"loser-select",value:c,onChange:function(e){return u(e.target.value)},className:"select"},d(s))),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return e.submit(s,c)}},"Submit"))},L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={history:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.ref("history").limitToLast(5).once("value",(function(t){e.setState((function(){var e=[];return t.forEach((function(t){e.push(t.toJSON())})),{history:e.reverse()}}))}))}},{key:"make_list",value:function(){return this.state.history.map((function(e,t){return r.a.createElement("li",{key:e.key},e.date,": ",e.winner," beats ",e.loser,", +/- ",e.mmr_change," MMR")}))}},{key:"render",value:function(){return r.a.createElement("ul",null,this.make_list())}}]),a}(r.a.Component),A=function(e){var t=r.a.useState(""),a=Object(m.a)(t,2),n=a[0],s=a[1],l=r.a.useState(""),i=Object(m.a)(l,2),o=i[0],c=i[1];return r.a.createElement("div",{className:"selectors"},r.a.createElement(y.a,{id:"username-input",label:"Username",type:"search",onChange:function(e){return s(e.target.value)}}),r.a.createElement(y.a,{id:"password-input",label:"Password",type:"password",onChange:function(e){return c(e.target.value)}}),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return e.submit(n,o)}},"Submit"))},D=function(e){return[r.a.createElement(N,{leaderboard:e.leaderboard}),r.a.createElement(I,{players:e.leaderboard,submit:e.submit}),r.a.createElement(L,null),r.a.createElement(A,{submit:e.login})][e.view]},B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={current_view:0,players:{},leaderboard:[],user:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.ref("users").orderByChild("rating").on("value",(function(t){e.setState((function(){var e=[];return t.forEach((function(t){var a=t.toJSON();a.username=t.key,e.unshift(a)})),{players:t.val(),leaderboard:e}}))}))}},{key:"login",value:function(e,t){var a=this;this.state.players[e]?j.ref("passwords").once("value").then((function(n){O()(t)===n.val()[e]?(alert("Signed in as ".concat(e)),a.setState({current_view:0,user:e})):alert("Password is incorrect")})):alert("Username is incorrect")}},{key:"change_current_view",value:function(e){this.setState({current_view:e})}},{key:"add_game",value:function(e,t){if(null!==this.state.user){if(this.state.players[e]&&this.state.players[t]){var a=this.state.players[e].rating,n=this.state.players[t].rating,r=this.state.players[e].games_played,s=this.state.players[t].games_played,l=this.state.players[e].name,i=this.state.players[t].name,o=function(e,t){return 1/(1+Math.pow(10,(e-t)/400))}(a,n),c=Math.round(50*o),u=new Date,m=j.ref("history").push().key,d={winner:l,loser:i,posted_by:this.state.user,mmr_change:c,date:(u.getMonth()+1).toString()+"/"+u.getDate().toString()},h={};h["/history/"+m]=d,h["users/"+e+"/rating"]=a+c,h["users/"+t+"/rating"]=n-c,h["users/"+e+"/games_played"]=r+1,h["users/"+t+"/games_played"]=s+1,j.ref().update(h)}this.change_current_view(0)}else alert("You need to be logged in")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"content-container"},r.a.createElement(D,{leaderboard:this.state.leaderboard,view:this.state.current_view,submit:function(t,a){return e.add_game(t,a)},login:function(t,a){return e.login(t,a)}})),r.a.createElement("div",{className:"footer"},r.a.createElement(C,{value:this.state.current_view,update:function(t){return e.change_current_view(t)}})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.0114f265.chunk.js.map